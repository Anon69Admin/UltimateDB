<!doctype html>
<html lang="en">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width,initial-scale=1" />
  <title>NEXUS / Scanner — Final</title>

  <!-- Font Awesome for icons -->
  <link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css" rel="stylesheet">

  <style>
    /*
      LuciferSec - Futuristic neon UI
      - Default theme: Green Neon Hacker
      - Alternate theme: Cyan-Pink (lucifer)
    */

    :root{
      /* Green Neon (default) */
      --bg: #051012;
      --panel: rgba(2,8,10,0.6);
      --neon-accent: #00ff9c; /* green glow */
      --neon-accent-2: #00b38f;
      --text: #e6fef0;
      --muted: rgba(230,254,240,0.62);
      --card-bg: rgba(0,0,0,0.25);
      --glass-border: rgba(0,255,156,0.06);
      --shadow: 0 12px 40px rgba(0,255,156,0.06);
    }

    /* Cyan-Pink theme (Lucifer) */
    .theme-cyan {
      --neon-accent: #00eaff;
      --neon-accent-2: #ff4d9e;
      --panel: rgba(8,12,18,0.6);
      --bg: linear-gradient(180deg,#020409 0%, #071017 100%);
      --text: #e6f7fb;
      --muted: rgba(230,247,251,0.6);
      --glass-border: rgba(0,255,255,0.04);
      --shadow: 0 12px 40px rgba(0,234,255,0.06);
    }

    html,body{height:100%;margin:0;font-family:Inter,ui-sans-serif,system-ui,-apple-system,"Segoe UI",Roboto,"Helvetica Neue",Arial; -webkit-font-smoothing:antialiased;}
    body{
      /* green default background */
      background: radial-gradient(1200px 600px at 10% 10%, rgba(0,255,156,0.03), transparent),
                  linear-gradient(180deg, rgba(0,0,0,0.55) 0%, rgba(2,8,10,0.9) 100%), var(--bg);
      color:var(--text);
      padding:26px;
      box-sizing:border-box;
      -webkit-tap-highlight-color: transparent;
    }

    .container{
      max-width:1100px;
      margin:0 auto;
      background: linear-gradient(180deg, rgba(255,255,255,0.02), rgba(0,0,0,0.02));
      border-radius:14px;
      padding:18px;
      box-shadow: var(--shadow);
      border:1px solid var(--glass-border);
      backdrop-filter: blur(6px);
      overflow:hidden;
    }

    /* Topbar */
    .topbar{display:flex;gap:12px;align-items:center;justify-content:space-between;margin-bottom:14px;flex-wrap:wrap}
    .logo{display:flex;gap:12px;align-items:center}
    .logo .dot{width:42px;height:42px;border-radius:12px;background:linear-gradient(135deg,var(--neon-accent),var(--neon-accent-2));box-shadow:0 12px 40px rgba(0,0,0,0.25), inset 0 -10px 30px rgba(0,0,0,0.2)}
    h1{font-size:20px;margin:0;color:var(--neon-accent);letter-spacing:0.6px;text-shadow:0 0 10px rgba(0,255,156,0.08)}
    .muted{color:var(--muted);font-size:13px}

    /* Controls */
    .controls{display:flex;gap:8px;align-items:center}
    #themeToggle{padding:10px 12px;border-radius:10px;border:1px solid rgba(255,255,255,0.03);background:transparent;color:var(--muted);cursor:pointer}
    #themeToggle i{margin-right:8px}

    /* Search options */
    .search-options{display:flex;gap:10px;flex-wrap:wrap;margin-top:6px}
    .option-btn{
      background:transparent;border:1px solid rgba(255,255,255,0.03);
      padding:10px 14px;border-radius:12px;color:var(--muted);cursor:pointer;display:flex;gap:10px;align-items:center;font-weight:600;font-size:13px;
      transition:all .18s ease;
    }
    .option-btn.active{
      color:var(--text);
      border:1px solid rgba(255,255,255,0.05);
      box-shadow: 0 6px 30px rgba(0,0,0,0.25), 0 0 22px rgba(0,0,0,0.12) inset;
      background: linear-gradient(90deg, rgba(0,255,156,0.03), rgba(0,0,0,0.02));
    }

    .search-area{display:flex;gap:12px;margin-top:12px;align-items:center}
    #searchInput{
      flex:1;padding:14px 16px;border-radius:14px;border:1px solid rgba(255,255,255,0.03);
      background: linear-gradient(180deg, rgba(0,0,0,0.25), rgba(255,255,255,0.01));
      color:var(--text);outline:none;font-size:15px;box-shadow:inset 0 -6px 18px rgba(0,0,0,0.25);
      min-width:0;
    }
    #searchInput::placeholder{color:rgba(255,255,255,0.18)}
    #searchBtn{
      padding:12px 18px;border-radius:14px;border:none;background:linear-gradient(90deg,var(--neon-accent),var(--neon-accent-2));
      color:#031018;font-weight:800;cursor:pointer;box-shadow:0 12px 36px rgba(0,0,0,0.18);
      display:flex;align-items:center;gap:8px;font-size:14px;
    }

    /* Panel */
    .panel{margin-top:18px;padding:18px;border-radius:12px;background:linear-gradient(180deg, rgba(255,255,255,0.01), rgba(0,0,0,0.02));border:1px solid var(--glass-border)}
    .no-data{padding:24px;text-align:center;color:var(--muted);font-weight:700}

    /* Progress */
    .progress-wrap{margin-top:12px}
    .progress-label{color:var(--muted);font-size:13px;margin-bottom:8px}
    .progress{width:100%;height:12px;border-radius:10px;background:linear-gradient(90deg, rgba(255,255,255,0.03), rgba(0,0,0,0.02));overflow:hidden;border:1px solid rgba(255,255,255,0.02)}
    .progress-bar{height:100%;width:0%;background:linear-gradient(90deg,var(--neon-accent),var(--neon-accent-2));transition:width 0.25s ease}

    /* Result layout - improved cards */
    .result-wrap{display:flex;flex-direction:column;gap:12px}
    .result-card{
      display:flex;flex-wrap:wrap;align-items:stretch;gap:0;
      border-radius:12px;overflow:hidden;padding:0;border:1px solid rgba(0,0,0,0.2);
      background: linear-gradient(180deg, rgba(0,0,0,0.18), rgba(255,255,255,0.01));
      box-shadow: 0 12px 36px rgba(0,0,0,0.22);
    }

    .result-left{
      flex:0 0 36%;
      min-width:120px;
      padding:16px;
      background: linear-gradient(90deg, rgba(0,0,0,0.06), rgba(0,0,0,0.02));
      border-right:3px solid rgba(0,0,0,0.06);
      position:relative;
      display:flex;align-items:center;justify-content:center;
    }
    .result-left::before{
      content:'';
      position:absolute;left:8px;top:8px;bottom:8px;width:8px;border-radius:6px;
      background: linear-gradient(180deg,var(--neon-accent),var(--neon-accent-2));
      box-shadow:0 6px 26px rgba(0,255,156,0.08), 0 0 18px rgba(0,255,156,0.05) inset;
      opacity:0.95;
    }
    .result-label{position:relative;z-index:2;color:var(--neon-accent);font-weight:800;text-transform:uppercase;font-size:13px;letter-spacing:0.6px;text-align:center}

    .result-right{
      flex:1;padding:14px 16px;color:var(--text);font-family:Consolas,monospace,monospace;
      font-size:14px;white-space:pre-wrap;
    }

    /* Special smaller layout for small screens */
    @media (max-width:720px){
      .result-left{flex:0 0 40%;min-width:110px;padding:12px}
      .result-right{font-size:15px;padding:12px}
      .search-area{flex-direction:row;align-items:center}
      #searchInput{padding:12px 14px}
      #searchBtn{padding:10px 14px;border-radius:12px}
      h1{font-size:18px}
    }

    /* Very small phones - stack labels on top */
    @media (max-width:420px){
      .result-card{flex-direction:column}
      .result-left{flex:0 0 auto;border-right:none;border-bottom:1px solid rgba(255,255,255,0.02)}
      .result-left::before{left:12px;top:12px;bottom:12px;width:6px;border-radius:6px}
      .result-label{text-align:left}
    }

    /* Collapsible section */
    .section-header{cursor:pointer;background:transparent;padding:12px;display:flex;align-items:center;justify-content:space-between;border-radius:10px;color:var(--neon-accent);font-weight:800}
    .section-header i{transition:transform .25s ease}
    .section-content{display:none;padding:8px 6px 14px 6px;animation:fadeIn 0.35s forwards}
    .section-header.active + .section-content{display:block}
    @keyframes fadeIn{from{opacity:0;transform:translateY(-6px)}to{opacity:1;transform:none}}

    /* Credit */
    .credit-bar{display:flex;justify-content:space-between;align-items:center;margin-top:12px;gap:12px;flex-wrap:wrap}
    .credit-btn{
      display:inline-flex;align-items:center;gap:12px;padding:10px 14px;border-radius:12px;
      background: linear-gradient(90deg,var(--neon-accent),var(--neon-accent-2));
      color:#031018;font-weight:800;border:none;cursor:pointer;text-decoration:none;
      box-shadow:0 18px 60px rgba(0,0,0,0.24), 0 0 24px rgba(0,255,156,0.06);
      transition:transform .18s ease, box-shadow .18s ease;
    }
    .credit-btn:hover{transform:translateY(-4px);box-shadow:0 30px 80px rgba(0,0,0,0.34)}
    .credit-btn .pulse{width:12px;height:12px;border-radius:50%;background:#fff;box-shadow:0 0 18px rgba(255,255,255,0.35),0 0 40px rgba(0,255,156,0.14)}

    /* small helper */
    .temp-toast{position:fixed;right:24px;bottom:24px;background:rgba(0,0,0,0.6);color:var(--text);padding:10px 12px;border-radius:8px;border:1px solid rgba(255,255,255,0.03);z-index:9999}

    /* matrix effect (subtle) */
    #matrixBg{position:fixed;left:0;top:0;right:0;bottom:0;pointer-events:none;opacity:0.03;mix-blend-mode:overlay;z-index:0}
    .matrix-char{position:absolute;color:var(--neon-accent);font-family:monospace;font-size:10px;opacity:0.6}
  </style>
</head>
<body>
  <div id="matrixBg" aria-hidden="true"></div>

  <div class="container" id="pageRoot">
    <div class="topbar">
      <div class="logo">
        <div class="dot" aria-hidden="true"></div>
        <div>
          <h1>NEXUS SCANNER</h1>
          <div class="muted">Multi-API Lookup • Aadhaar • CallTracer • Default</div>
        </div>
      </div>

      <div class="controls">
        <button id="themeToggle" title="Toggle theme"><i class="fas fa-exchange-alt"></i> THEME</button>
      </div>
    </div>

    <div class="search-options" style="display:flex;gap:10px;flex-wrap:wrap">
      <button class="option-btn active" id="phoneOption"><i class="fas fa-phone"></i> SEARCH BY PHONE (PK)</button>
      <button class="option-btn" id="cnicOption"><i class="fas fa-id-card"></i> SEARCH BY CNIC (PK)</button>
      <button class="option-btn" id="aadhaarOption"><i class="fas fa-id-badge"></i> SEARCH BY AADHAAR (IN)</button>
      <button class="option-btn" id="indiaPhoneOption"><i class="fas fa-mobile"></i> SEARCH BY INDIAN PHONE (IN)</button>
    </div>

    <div class="search-area">
      <input id="searchInput" placeholder="ENTER 11-DIGIT PHONE NUMBER (PK)" maxlength="11" inputmode="numeric" pattern="\d*">
      <button id="searchBtn"><i class="fas fa-search"></i> SCAN</button>
    </div>

    <div class="panel" id="resultPanel">
      <div id="resultContainer" class="no-data">
        ENTER A NUMBER / CNIC / AADHAAR AND CLICK SCAN
      </div>

      <!-- progress -->
      <div class="progress-wrap" id="progressWrap" style="display:none">
        <div class="progress-label">SCANNING DATABASE... <span id="progressPercent">0%</span></div>
        <div class="progress"><div id="progressBar" class="progress-bar"></div></div>
      </div>

      <div class="credit-bar">
        <a href="https://t.me/LuciferSec" id="creditLink" class="credit-btn" target="_blank" rel="noopener noreferrer" title="Telegram @LuciferSec">
          <span class="pulse" aria-hidden="true"></span>
          CREDIT: @LuciferSec
        </a>
        <div class="muted">Made with ♥ by Faxal</div>
      </div>
    </div>
  </div>

<script>
document.addEventListener('DOMContentLoaded', function() {
  // ---------- CONFIG ----------
  const DEFAULT_API_TEMPLATE = 'https://fam-official.serv00.net/api/database.php?number={number}';
  const AADHAAR_API_TEMPLATE = 'https://khandankanaam.alphaapi.workers.dev/fetch?key=paidchx&aadhaar={number}';
  const INDIA_PHONE_API_TEMPLATE = 'https://calltracerinfoapi.vercel.app/api?number={number}';
  // ----------------------------

  // UI refs
  const phoneOption = document.getElementById('phoneOption');
  const cnicOption = document.getElementById('cnicOption');
  const aadhaarOption = document.getElementById('aadhaarOption');
  const indiaPhoneOption = document.getElementById('indiaPhoneOption');
  const searchInput = document.getElementById('searchInput');
  const searchBtn = document.getElementById('searchBtn');
  const resultContainer = document.getElementById('resultContainer');
  const progressWrap = document.getElementById('progressWrap');
  const progressBar = document.getElementById('progressBar');
  const progressPercent = document.getElementById('progressPercent');
  const themeToggle = document.getElementById('themeToggle');
  const matrixBg = document.getElementById('matrixBg');
  const pageRoot = document.getElementById('pageRoot');

  // default state
  let searchType = 'phone'; // phone, cnic, aadhaar, indiaPhone

  // USE green theme as default (no class). Add .theme-cyan for alternative.
  // Prebuild matrix background
  (function createMatrixEffect(){
    const chars = '01ABCDEFGHIJKLMNOPQRSTUVWXYZ0123456789';
    for(let i=0;i<80;i++){
      const el = document.createElement('div');
      el.className='matrix-char';
      el.style.left = (Math.random()*100)+'vw';
      el.style.top = (Math.random()*100)+'vh';
      el.style.opacity = (Math.random()*0.35+0.02);
      el.style.fontSize = (8 + Math.random()*14)+'px';
      el.textContent = chars[Math.floor(Math.random()*chars.length)];
      matrixBg.appendChild(el);
    }
  })();

  // Option click helpers
  function setActive(btn){
    [phoneOption,cnicOption,aadhaarOption,indiaPhoneOption].forEach(b=>b.classList.remove('active'));
    btn.classList.add('active');
  }

  phoneOption.addEventListener('click', ()=> {
    setActive(phoneOption);
    searchType='phone';
    searchInput.placeholder='ENTER 11-DIGIT PHONE NUMBER (PK)';
    searchInput.maxLength=11; searchInput.value='';
    resultContainer.innerHTML='<div class="no-data">ENTER 11-DIGIT PHONE TO SCAN</div>';
  });

  cnicOption.addEventListener('click', ()=> {
    setActive(cnicOption);
    searchType='cnic';
    searchInput.placeholder='ENTER 13-DIGIT CNIC NUMBER (PK)';
    searchInput.maxLength=13; searchInput.value='';
    resultContainer.innerHTML='<div class="no-data">ENTER 13-DIGIT CNIC TO SCAN</div>';
  });

  aadhaarOption.addEventListener('click', ()=> {
    setActive(aadhaarOption);
    searchType='aadhaar';
    searchInput.placeholder='ENTER 12-DIGIT AADHAAR NUMBER (IN)';
    searchInput.maxLength=12; searchInput.value='';
    resultContainer.innerHTML='<div class="no-data">ENTER 12-DIGIT AADHAAR TO SCAN</div>';
  });

  indiaPhoneOption.addEventListener('click', ()=> {
    setActive(indiaPhoneOption);
    searchType='indiaPhone';
    searchInput.placeholder='ENTER 10-DIGIT INDIAN PHONE NUMBER';
    searchInput.maxLength=10; searchInput.value='';
    resultContainer.innerHTML='<div class="no-data">ENTER 10-DIGIT INDIAN PHONE TO SCAN</div>';
  });

  // Theme toggle: switch between green (default) and cyan theme
  themeToggle.addEventListener('click', ()=>{
    if(document.body.classList.contains('theme-cyan')){
      document.body.classList.remove('theme-cyan');
      themeToggle.innerHTML = '<i class="fas fa-exchange-alt"></i> THEME';
    } else {
      document.body.classList.add('theme-cyan');
      themeToggle.innerHTML = '<i class="fas fa-exchange-alt"></i> LUCIFER';
    }
  });

  // Search handlers
  searchBtn.addEventListener('click', searchInfo);
  searchInput.addEventListener('keypress', (e)=> { if(e.key === 'Enter') searchInfo(); });

  function searchInfo(){
    const v = searchInput.value.trim();
    if(!v){ showError('PLEASE ENTER A VALUE'); return; }
    if(!/^\d+$/.test(v)){ showValidationError('INVALID INPUT','Only digits allowed','Example: 03123456789'); return; }

    if(searchType==='phone' && v.length!==11){ showValidationError('INVALID PHONE LENGTH','Phone must be 11 digits (PK)','03123456789'); return; }
    if(searchType==='cnic' && v.length!==13){ showValidationError('INVALID CNIC LENGTH','CNIC must be 13 digits (PK)','0000000000000'); return; }
    if(searchType==='aadhaar' && v.length!==12){ showValidationError('INVALID AADHAAR LENGTH','Aadhaar must be 12 digits (IN)','123412341234'); return; }
    if(searchType==='indiaPhone' && v.length!==10){ showValidationError('INVALID INDIAN PHONE LENGTH','Indian phone must be 10 digits','9876543210'); return; }

    // show loader & progress
    startProgress();
    resultContainer.innerHTML = `<div class="no-data" style="display:flex;align-items:center;gap:12px"><div style="width:34px;height:34px;border-radius:50%;border:3px solid rgba(255,255,255,0.04);border-top:3px solid var(--neon-accent);animation:spin 1s linear infinite"></div> SCANNING DATABASE...</div>`;

    const url = buildApiUrl(searchType, v);
    if(!url){ stopProgress(); showError('API NOT CONFIGURED FOR THIS SEARCH TYPE'); return; }

    // fetch with fallback to proxy
    fetch(url)
      .then(res => {
        if(!res.ok) throw new Error('NETWORK_ERROR');
        // try parse json (some endpoints respond JSON)
        return res.json();
      })
      .then(data => {
        stopProgress();
        handleApiDisplay(data, searchType, v);
      })
      .catch(err => {
        console.warn('Direct fetch failed, trying proxy...', err);
        const proxyUrl = 'https://api.allorigins.win/raw?url=' + encodeURIComponent(url);
        fetch(proxyUrl)
          .then(res => {
            if(!res.ok) throw new Error('PROXY_ERROR');
            return res.json();
          })
          .then(data => {
            stopProgress();
            handleApiDisplay(data, searchType, v);
          })
          .catch(e => {
            stopProgress();
            console.error('All fetch attempts failed', e);
            showError('DATABASE CONNECTION FAILED. TRY AGAIN.');
          });
      });
  }

  function buildApiUrl(type, number){
    function fill(tpl){ return tpl.replace('{number}', encodeURIComponent(number)); }
    if(type==='aadhaar') return fill(AADHAAR_API_TEMPLATE);
    if(type==='indiaPhone') return fill(INDIA_PHONE_API_TEMPLATE);
    return fill(DEFAULT_API_TEMPLATE);
  }

  // Progress simulation
  let progressInterval=null;
  function startProgress(){
    progressWrap.style.display='block';
    progressBar.style.width='6%';
    progressPercent.textContent='6%';
    let pct=6;
    clearInterval(progressInterval);
    progressInterval = setInterval(()=> {
      const add = Math.random()*6 + (pct<60 ? 6 : 1.5);
      pct = Math.min(92, Math.round(pct + add));
      progressBar.style.width = pct + '%';
      progressPercent.textContent = pct + '%';
    }, 420);
  }
  function stopProgress(){
    clearInterval(progressInterval);
    progressBar.style.width = '100%';
    progressPercent.textContent = '100%';
    setTimeout(()=> {
      progressWrap.style.display='none';
      progressBar.style.width='0%';
      progressPercent.textContent='0%';
    }, 600);
  }

  // Display logic - improved cards for clean mobile layout
  function handleApiDisplay(data, type, query){
    console.log('API DATA:', data);

    // Aadhaar record detection
    if(data && data.homeStateName && Array.isArray(data.memberDetailsList)){
      displayAadhaar(data);
      return;
    }
    // CallTracer detection: keys such as "Owner Name" or "SIM card"
    if(data && (data['Owner Name'] || data['SIM card'] || data['Mobile State'] || data['Number'] || data['owner'])) {
      displayCallTracer(data);
      return;
    }
    // generic structure {success, data}
    if(data && data.success && data.data){
      if(Array.isArray(data.data) && data.data.length>0){ displayGeneric(data.data[0]); return; }
      if(typeof data.data === 'object'){ displayGeneric(data.data); return; }
    }
    // fallback: if top-level has name/number
    if(data && (data.name || data.number || data.phone || data.cnic)){
      displayGeneric(data);
      return;
    }
    // otherwise raw output
    resultContainer.innerHTML = `<div class="result-wrap"><div class="no-data">UNRECOGNIZED RESPONSE — RAW OUTPUT BELOW</div><pre style="white-space:pre-wrap;margin-top:10px;color:var(--muted)">${JSON.stringify(data, null, 2)}</pre></div>`;
  }

  function displayAadhaar(obj){
    const rows = [
      ['State', obj.homeStateName || 'Unknown'],
      ['District', obj.homeDistName || 'Unknown'],
      ['Scheme', obj.scheme
